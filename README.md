
##制作物
```
:記事URLを入れると記事カテゴリを返す、ナイーブベイズを使った教師あり文書分類器ウェブアプリの実装
:分類精度の確認及び、精度向上のための手法比較の結果
```
####開発環境
```
Python 3.6
Django 1.11.3
```

####訓練データ
```
GunosyのWebサイト(https://gunosy.com/)のエンタメ,スポーツ,おもしろ,国内,海外,コラム,IT・科学,グルメカテゴリー
800記事（100記事×8カテゴリー）のタイトル及び、リード文を学習データとして用いる。


■訓練データとしてタイトルとリード文を選択した理由
１、タイトルはその記事の象徴しているから。
２、タイトルのみでは単語数が少なく精度が悪かったため、リード文も用いた。（なお今回は精度向上の解決策にはそれを含めていない）


よって、訓練データ数は８(カテゴリー)×２０（カテゴリー１ページあたりの記事数）×（ページ）=800
(実際は若干800より少ない。何回か試したがクローリングが最後まで行かず、最終カテゴリーのみ若干データ数が少ない。)


また汎用性を持たせるためgettrain.pyモジュールの41行目と42行目のCATEGORY_PAGE_START_INDEX = 1、
CATEGORY_PAGE_END_INDEX = 100を変更すると取得するカテゴリーページを変更することが出来る。

■形態素解析について
今回、形態素解析をするにあたり用いた品詞は（名詞、動詞、形容詞、形容動詞）である。
```

####実行方法
```
１、課題のgunosyフォルダをクローン  

$git clone https://github.com/shotanaka0513/gunosy.git  

２、クローンしたgunosyフォルダへ移動  

$cd gunosy    

３、lsコマンドでgunosyフォルダ内を確認  

$ls

README.md		gunosy			naivebayes.py
__pycache__		inputscraping.py	scraiping.py
db.sqlite3		manage.py		templates
guesscategory		morphological.py


４、現在いるフォルダが３のようになったら以下のコマンドでサーバーを起動  

$python manage.py runserver　　


５、サーバーを起動後gunosyサイトの記事を訓練させているため、少し（３０秒ぐらい）待ちます。  

６、５を終了後、ブラウザに以下のurlにアクセス  
http://127.0.0.1:8000/guesscategory/

７、フォームに記事urlを入力  

８、訓練データを元に入力された記事urlのカテゴリが返ってくる。

```

####精度の確認方法
```
■精度検証について
精度検証にはデータ数が少ないこともあり、「交差検定（leave one out）」を用いた。

１、python trans_data.pyを実行
取得したデータを[カテゴリー　単語：単語数]のようにデータ形式を変換する。（gunosy.csvが作成される）

２、python crossvalidation.py を実行
交差検定をし、精度を評価する。
```


####分類性能の向上と精度の比較
```
■精度向上の手法
ストップワードと２種類の特徴選択（相互情報量、カイ２乗値）を用いる手法を組み合わせて、分類性能の比較をした。

以下に、（１）ナイーブベイズのみ、（２）ナイーブベイズとストップワード、（３）ナイーブベイズとストップワード、相互情報量による抽出、（４）ナイーブベイズとストップワード、カイ２乗値による抽出
の４パターンでの精度を示す。
```
<img src="http://imgur.com/Dz2DRGB" alt="精度比較">
http://imgur.com/Dz2DRGB
